<!doctype html>

<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>ROYAL MARKET ‚Äî –ü—Ä–∞–π—Å</title>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>

  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    :root{
      --bg:#faf7f3;
      --text:#1c1c1c;
      --muted:#6b6b6b;
      --border:#e7ded4;
      --card:#ffffff;
      --chip:#f2ece6;
      --dark:#2f2a25;
      --dark2:#25211d;
      --shadow: 0 10px 30px rgba(0,0,0,0.06);
      --radius: 16px;
      --green:#22c55e;

      --app-height: 100%;
      --kb-offset: 0px;
    }
    *{box-sizing:border-box}

    html, body{
      height: var(--app-height);
      min-height: var(--app-height);
      overflow-x: hidden;
      background: var(--bg);
    }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    input, textarea{ max-width:100%; }

    .container{max-width:1100px;margin:0 auto;padding:0 16px;}
    header{
      position:sticky;top:0;z-index:20;
      background: rgba(250,247,243,0.92);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
    }
    .header-top{padding:12px 0}
    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .brand{min-width:220px}
    .brand b{display:block;font-size:18px;letter-spacing:.2px}
    .brand span{display:block;color:var(--muted);font-size:13px}
    .controls{flex:1;display:flex;justify-content:flex-end;gap:12px;align-items:center}
    .btn{
      border:1px solid rgba(0,0,0,0.08);
      border-radius:999px;padding:10px 14px;
      background:#fff;cursor:pointer;
      box-shadow: var(--shadow);
      transition: background .15s ease, transform .05s ease;
    }
    .btn:active{transform: translateY(1px)}
    .btn-dark{
      background: var(--dark);
      color:#fff;
    }
    .btn-dark:hover{background: var(--dark2)}
    .btn:hover{background: var(--chip)}
    .cart-btn{position:relative;display:flex;align-items:center;gap:6px}
    .badge{
      position:absolute;top:-6px;right:-6px;
      width:20px;height:20px;border-radius:999px;
      background: var(--green);
      color:#fff;
      font-size:12px;display:flex;align-items:center;justify-content:center;
    }
    .chips{padding:8px 0 12px}
    .chip{
      cursor:pointer; user-select:none;
      display:inline-flex; align-items:center;
      padding:8px 12px;border-radius:999px;
      font-size:14px;
      background: var(--chip);
      border:1px solid var(--border);
      color: var(--dark);
      margin:0 8px 8px 0;
    }
    .chip.active{
      background: var(--dark);
      color:#fff;
      border-color: rgba(0,0,0,0.08);
    }

    main{padding:10px 0 28px}
    .section{
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:clip; /* ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –±—ã–ª–æ overflow:hidden ‚Äî –ª–æ–º–∞–ª–æ sticky –∑–∞–≥–æ–ª–æ–≤–∫–∏ */
      margin-bottom:14px;
    }
    .section h2{
      margin:0;
      padding:12px 16px;
      font-size:14px;
      letter-spacing:.2px;
      border-bottom:1px solid var(--border);
      background: linear-gradient(to bottom, rgba(255,255,255,0.9), #fff);
      position:sticky;
      top:92px;
      z-index:10;
      display:flex;justify-content:space-between;align-items:center;gap:10px;
    }
    .section h2 small{color:var(--muted);font-weight:600}

    /* ‚îÄ‚îÄ‚îÄ DESKTOP TABLE ‚îÄ‚îÄ‚îÄ */
    table{width:100%;border-collapse:collapse}
    thead th{
      position:sticky;top:130px;z-index:9;
      background:#fff;
      font-size:12px;color:var(--muted);
      text-align:left;
      padding:10px 16px;
      border-bottom:1px solid var(--border);
    }
    thead th.right{text-align:right}
    tbody td{
      padding:12px 16px;
      vertical-align:top;
      border-bottom:1px solid var(--border);
      font-size:14px;
    }
    tbody tr:last-child td{border-bottom:0}
    .name{font-weight:700}
    .mono{font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
    .muted{color:var(--muted)}
    .pricecell{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .add-btn{
      border:0;background:transparent;
      cursor:pointer;font-size:18px;line-height:1;
      transition: transform .05s ease, opacity .15s ease;
    }
    .add-btn:active{transform: translateY(1px)}
    .add-btn:hover{opacity:.75}

    /* ‚îÄ‚îÄ‚îÄ MOBILE CARDS ‚îÄ‚îÄ‚îÄ */
    .mobile-cards { display: none; }

    .product-card {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
    }
    .product-card:last-child { border-bottom: 0; }

    .product-card-name {
      font-weight: 700;
      font-size: 15px;
      margin-bottom: 4px;
      line-height: 1.3;
    }
    .product-card-note {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .price-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .price-pill {
      display: flex;
      align-items: center;
      gap: 6px;
      background: var(--chip);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 7px 10px 7px 12px;
      cursor: pointer;
      transition: background .15s ease, transform .05s ease;
      min-width: 0;
    }
    .price-pill:active { transform: translateY(1px); }
    .price-pill:hover { background: #e8ddd5; }

    .price-pill-label {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }
    .price-pill-value {
      font-size: 14px;
      font-weight: 700;
      font-variant-numeric: tabular-nums;
      white-space: nowrap;
    }
    .price-pill-icon {
      font-size: 16px;
      line-height: 1;
      flex-shrink: 0;
    }

    /* Added animation for pill */
    .price-pill.added {
      background: var(--green);
      border-color: var(--green);
    }
    .price-pill.added .price-pill-label,
    .price-pill.added .price-pill-value {
      color: #fff;
    }

    @media (max-width: 720px){
      .desktop-table { display: none; }
      .mobile-cards { display: block; }
      .section h2 { top: 88px; }
    }

    /* ‚îÄ‚îÄ‚îÄ CART & BACKDROP ‚îÄ‚îÄ‚îÄ */
    .backdrop{
      position:fixed;inset:0;z-index:40;
      background: rgba(0,0,0,0.4);
      opacity:0;pointer-events:none;
      transition: opacity .25s ease;
    }
    .backdrop.open{opacity:1;pointer-events:auto}

    .cart{
      position:fixed;top:0;right:0;height:100%;
      width:100%;max-width:420px;
      background:#fff;z-index:50;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      transform: translateX(100%);
      transition: transform .25s ease;
      display:flex;flex-direction:column;
      height: var(--app-height);
      overflow: hidden;
      overscroll-behavior: contain;
    }
    .cart.open{transform: translateX(0)}
    .cart-head{
      padding:14px 16px;
      border-bottom:1px solid var(--border);
      background: var(--bg);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .cart-head h3{margin:0;font-size:20px}
    .xbtn{
      border:0;background:transparent;
      font-size:28px;cursor:pointer;line-height:1;
      padding:4px 8px;
    }
    .cart-body{padding:14px 16px;overflow:auto;flex:1;-webkit-overflow-scrolling:touch}
    .cart-foot{
      padding:14px 16px;
      border-top:1px solid var(--border);
      background: var(--bg);
      transform: translateY(var(--kb-offset));
      will-change: transform;
      transition: none;
    }

    .item{
      padding:12px 0;
      border-bottom:1px solid var(--border);
    }
    .item:last-child{border-bottom:0}
    .item-top{display:flex;justify-content:space-between;gap:10px;margin-bottom:6px}
    .qty{
      display:inline-flex;align-items:center;
      background: var(--chip);
      border-radius:999px;
      overflow:hidden;
    }
    .qty button{
      width:32px;height:32px;border:0;background:transparent;
      cursor:pointer;font-size:18px;
      transition: background .15s ease;
    }
    .qty button:hover{background: var(--border)}
    .qty span{min-width:44px;text-align:center;padding:0 8px}
    .trash{
      margin-top:8px;
      border:0;background:transparent;
      cursor:pointer;
      color: var(--dark);
      font-size:14px;
      display:inline-flex;align-items:center;gap:6px;
    }
    .trash:hover{color:var(--muted)}
    .totals{display:flex;justify-content:space-between;align-items:center;font-size:18px;margin:10px 0 14px}
    .totals b{font-size:20px}
    .stack{display:flex;flex-direction:column;gap:10px}
    .two{display:flex;gap:10px}
    .two > *{flex:1}

    .form{
      border:1px solid var(--border);
      background:#fff;
      border-radius: 14px;
      padding:12px;
      margin-bottom:12px;
    }
    .form h4{margin:0 0 8px;font-size:14px}
    .field{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
    .field label{font-size:12px;color:var(--muted)}
    .field input{
      padding:10px 12px;
      border-radius: 12px;
      border:1px solid var(--border);
      outline:0;
      font-size:14px;
      background:#fff;
    }
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .footer-note{
      font-size:12px;color:var(--muted);text-align:center;line-height:1.4;
      margin-top:10px;
    }

    /* ‚îÄ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ */
    .toastwrap{
      overflow:hidden;
      max-height:0;
      opacity:0;
      transform: translateY(8px);
      transition: max-height .28s ease, opacity .22s ease, transform .22s ease;
      margin-bottom:0;
    }
    .toastwrap.show{
      max-height:120px;
      opacity:1;
      transform: translateY(0);
      margin-bottom:10px;
    }
    .toast{
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(10px);
      border:1px solid var(--border);
      box-shadow: 0 14px 40px rgba(0,0,0,0.12);
      border-radius: 14px;
      padding:10px 12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .toast .dot{
      width:10px;height:10px;border-radius:99px;
      background: var(--green);
      margin-top:4px;
      flex:0 0 auto;
    }
    .toast .ttext{
      font-size:13px;
      color: var(--dark);
      line-height:1.35;
      flex:1 1 auto;
    }
    .toast .tbtn{
      border:0;
      background:transparent;
      cursor:pointer;
      font-size:18px;
      line-height:1;
      padding:0 2px;
      color: var(--muted);
      flex:0 0 auto;
    }
    .toast .tbtn:hover{color: var(--dark)}

    /* ‚îÄ‚îÄ‚îÄ GLOBAL ADD TOAST (fixed, bottom-center) ‚îÄ‚îÄ‚îÄ */
    .global-toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      z-index: 100;
      background: var(--dark);
      color: #fff;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 600;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
      opacity: 0;
      pointer-events: none;
      transition: opacity .22s ease, transform .22s ease;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .global-toast.visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      pointer-events: auto;
    }
  </style>

</head>

<body>
  <div id="root"></div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <script>
    (function () {
      const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : null;
      let baseHeight = 0;
      let raf = 0;

      function measureOnce() {
        const vv = window.visualViewport;
        const vvH = vv ? Math.round(vv.height) : Math.round(window.innerHeight || 0);
        const vvTop = vv ? Math.round(vv.offsetTop || 0) : 0;
        const visibleBottom = vvH + vvTop;
        const tgStable = (tg && tg.viewportStableHeight) ? Math.round(tg.viewportStableHeight) : 0;
        const tgH = (tg && tg.viewportHeight) ? Math.round(tg.viewportHeight) : 0;
        const wH = Math.round(window.innerHeight || 0);
        const candidate = Math.max(tgStable, tgH, wH, visibleBottom);
        if (candidate > baseHeight) baseHeight = candidate;
        document.documentElement.style.setProperty('--app-height', baseHeight + 'px');
        const kb = Math.max(0, baseHeight - visibleBottom);
        document.documentElement.style.setProperty('--kb-offset', kb + 'px');
      }

      function compute() {
        if (raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          measureOnce();
          setTimeout(measureOnce, 50);
          setTimeout(measureOnce, 150);
        });
      }

      if (tg && tg.expand) tg.expand();
      compute();
      if (tg && tg.onEvent) tg.onEvent('viewportChanged', compute);
      window.addEventListener('resize', compute);
      window.addEventListener('orientationchange', compute);
      if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', compute);
        window.visualViewport.addEventListener('scroll', compute);
      }
      document.addEventListener('focusin', compute);
      document.addEventListener('focusout', compute);
    })();
  </script>

  <script type="text/babel">
    const { useEffect, useMemo, useState, useCallback, useRef } = React;

    const TELEGRAM_USERNAME = "OrEx_zakaz";

    const data = [
      {
        cat: "–û—Ä–µ—Ö–∏",
        items: [
          {name:"–ê—Ä–∞—Ö–∏—Å –∂–∞—Ä–µ–Ω—ã–π", kg:"15—Ä", g500:"8—Ä", g250:"4,5—Ä"},
          {name:"–ê—Ä–∞—Ö–∏—Å –∂–∞—Ä–µ–Ω—ã–π —Å–æ–ª—ë–Ω—ã–π", kg:"15—Ä", g500:"8—Ä", g250:"4,5—Ä"},
          {name:"–ê—Ä–∞—Ö–∏—Å —Å—ã—Ä–æ–π –∫—Ä–∞—Å–Ω—ã–π", kg:"15—Ä", g500:"8—Ä", g250:"4,5—Ä"},
          {name:"–ë–æ–±—ã –∂–∞—Ä–µ–Ω—ã–µ —Å–æ–ª—ë–Ω—ã–µ", kg:"27—Ä", g500:"14—Ä", g250:"7,5—Ä"},
          {name:"–ë—Ä–∞–∑–∏–ª—å—Å–∫–∏–π –æ—Ä–µ—Ö", kg:"135—Ä", g500:"68,5—Ä", g250:"35—Ä"},
          {name:"–ì—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–ì—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö –≤ —Å–∫–æ—Ä–ª—É–ø–µ", kg:"16—Ä", g500:"8,5—Ä", g250:"5—Ä"},
          {name:"–ö–µ–¥—Ä–æ–≤—ã–π –æ—Ä–µ—Ö", kg:"135—Ä", g500:"68,5—Ä", g250:"35—Ä"},
          {name:"–ö–µ—à—å—é –∂–∞—Ä–µ–Ω—ã–π", kg:"45—Ä", g500:"23—Ä", g250:"12—Ä"},
          {name:"–ö–µ—à—å—é —Å—ã—Ä–æ–π –æ—á–∏—â–µ–Ω–Ω—ã–π", kg:"45—Ä", g500:"23—Ä", g250:"12—Ä"},
          {name:"–ú–∏–Ω–¥–∞–ª—å –∂–∞—Ä–µ–Ω—ã–π", kg:"45—Ä", g500:"23—Ä", g250:"12—Ä"},
          {name:"–ú–∏–Ω–¥–∞–ª—å —Å—ã—Ä–æ–π –æ—á–∏—â–µ–Ω–Ω—ã–π", kg:"45—Ä", g500:"23—Ä", g250:"12—Ä"},
          {name:"–§—É–Ω–¥—É–∫ –∂–∞—Ä–µ–Ω—ã–π", kg:"45—Ä", g500:"23—Ä", g250:"12—Ä"},
          {name:"–§—É–Ω–¥—É–∫ —Å—ã—Ä–æ–π –æ—á–∏—â–µ–Ω–Ω—ã–π", kg:"45—Ä", g500:"23—Ä", g250:"12—Ä"},
          {name:"–ü–µ–∫–∞–Ω –Ω–µ–æ—á–∏—â–µ–Ω–Ω—ã–π", kg:"50—Ä", g500:"25,5—Ä", g250:"13,5—Ä"},
          {name:"–§–∏—Å—Ç–∞—à–∫–∞ –∂–∞—Ä–µ–Ω–∞—è —Å–æ–ª—ë–Ω–∞—è", kg:"70—Ä", g500:"35,5—Ä", g250:"18,5—Ä"},
          {name:"–ú–∞–∫–∞–¥–∞–º–∏—è –Ω–µ–æ—á–∏—â–µ–Ω–Ω–∞—è", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–ó–µ—Ä–Ω–æ –∫—É–∫—É—Ä—É–∑—ã –¥–ª—è –ø–æ–ø–∫–æ—Ä–Ω–∞", kg:"10—Ä", g500:"5,5—Ä", g250:"3,5—Ä"},
        ]
      },
      {
        cat: "–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã",
        items: [
          {name:"–ê–Ω–∞–Ω–∞—Å —Ü—É–∫–∞—Ç—ã (–∫—É–±–∏–∫–∏)", kg:"25—Ä", g500:"13—Ä", g250:"7—Ä"},
          {name:"–ë–∞–Ω–∞–Ω–æ–≤—ã–µ —á–∏–ø—Å—ã", kg:"25—Ä", g500:"13—Ä", g250:"7—Ä"},
          {name:"–í–∏—à–Ω—è –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Å—É—à–µ–Ω–∞—è", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–ò–∑—é–º GOLD ¬´–¥–∞–º—Å–∫–∏–µ –ø–∞–ª—å—á–∏–∫–∏¬ª", kg:"20—Ä", g500:"10,5—Ä", g250:"6—Ä"},
          {name:"–ò–∑—é–º JUMBO —Ç—ë–º–Ω—ã–π", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
          {name:"–ò–Ω–∂–∏—Ä –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –≥–æ—Ä–Ω—ã–π", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–ö–∏–≤–∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Å—É—à–µ–Ω—ã–π", kg:"25—Ä", g500:"13—Ä", g250:"7—Ä"},
          {name:"–ö–ª—é–∫–≤–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Å—É—à–µ–Ω–∞—è (–ø–æ–¥—Å–ª–∞—â–µ–Ω–Ω–∞—è)", kg:"35—Ä", g500:"18—Ä", g250:"10—Ä"},
          {name:"–ö—É—Ä–∞–≥–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
          {name:"–ú–∞–Ω–≥–æ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Å—É—à–µ–Ω—ã–π", kg:"35—Ä", g500:"18—Ä", g250:"10—Ä"},
          {name:"–£—Ä—é–∫ (–∞–±—Ä–∏–∫–æ—Å —Å –∫–æ—Å—Ç–æ—á–∫–æ–π)", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
          {name:"–§–∏–Ω–∏–∫ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π PREMIUM JUMBO", kg:"65—Ä", g500:"33—Ä", g250:"17—Ä"},
          {name:"–§–∏–Ω–∏–∫ —Å –∫–æ—Å—Ç–æ—á–∫–æ–π", kg:"15—Ä", g500:"8—Ä", g250:"4,5—Ä"},
          {name:"–ö–ª—É–±–Ω–∏–∫–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Å—É—à–µ–Ω–∞—è", kg:"50—Ä", g500:"25,5—Ä", g250:"13,5—Ä"},
          {name:"–ü–µ—Ä—Å–∏–∫ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Å—É—à–µ–Ω—ã–π", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
          {name:"–ú–∞—Ä–∞–∫—É–π—è –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Å—É—à–µ–Ω–∞—è", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–î—ã–Ω—è –∫–æ—Å–∏—á–∫–∞", kg:"20—Ä", g500:"10,5—Ä", g250:"6—Ä",
            note:"–°—É—à—ë–Ω–∞—è –¥—ã–Ω—è, –Ω–∞—Ä–µ–∑–∞–Ω–Ω–∞—è —Ç–æ–Ω–∫–∏–º–∏ –ø–æ–ª–æ—Å–∫–∞–º–∏ –∏ –∑–∞–ø–ª–µ—Ç–µ–Ω–Ω–∞—è –≤ ¬´–∫–æ—Å–∏—á–∫–∏¬ª"},
          {name:"–•–∞—à—Ç–∞–∫", pack:"–õ–æ—Ç–æ–∫ 500 –≥ ‚Äî 10—Ä",
            note:"–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫—É—Ä–∞–≥–∞, —Ñ–∞—Ä—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º –∏ –∏–∑—é–º–æ–º, –ø–æ–∫—Ä—ã—Ç–∞—è –º—ë–¥–æ–º"},
          {name:"–®–∏–ø–æ–≤–Ω–∏–∫ —Å—É—à–µ–Ω—ã–π", kg:"15—Ä", g500:"8—Ä", g250:"4,5—Ä"},
        ]
      },
      {
        cat: "–ú–∞—Å–ª–æ, –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏—è –∏ —Å–ø–µ—Ü–∏–∏",
        items: [
          {name:"–ú–∞—Å–ª–æ –∫–µ–¥—Ä–æ–≤–æ–≥–æ –æ—Ä–µ—Ö–∞ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –æ—Ç–∂–∏–º–∞ (–Ω–µ—Ä–∞—Ñ.)", pack:"–°—Ç–µ–∫–ª–æ 0,25 –ª ‚Äî 35—Ä"},
          {name:"–ú–∞—Å–ª–æ –∞–≤–æ–∫–∞–¥–æ (—Ä–∞—Ñ.)", pack:"–°—Ç–µ–∫–ª–æ 1 –ª ‚Äî 35—Ä"},
          {name:"–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –≥—Ä–∞–Ω–∞—Ç–æ–≤—ã–π —Å–æ–∫ –ø—Ä—è–º–æ–≥–æ –æ—Ç–∂–∏–º–∞", pack:"–°—Ç–µ–∫–ª–æ 1 –ª ‚Äî 20—Ä"},
          {name:"–ù–∞—Ä—à–∞—Ä–∞–± (—Å–æ—É—Å –≥—Ä–∞–Ω–∞—Ç–æ–≤—ã–π)", pack:"–°—Ç–µ–∫–ª–æ 0,33 –ª ‚Äî 10—Ä"},
          {name:"–ü—Ä–∏–ø—Ä–∞–≤–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è", kg:"50—Ä", g500:"25,5—Ä", g250:"13,5—Ä"},
          {name:"–ü—Ä–∏–ø—Ä–∞–≤–∞ –¥–ª—è –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤", kg:"50—Ä", g500:"25,5—Ä", g250:"13,5—Ä"},
        ]
      },
      {
        cat: "–°–º–µ—Å–∏",
        items: [
          {name:"–°–º–µ—Å—å –¥–ª—è –∫–æ–º–ø–æ—Ç–∞", kg:"20—Ä", g500:"10,5—Ä", g250:"6—Ä",
            note:"–ê–±—Ä–∏–∫–æ—Å —Å –∫–æ—Å—Ç–æ—á–∫–æ–π, —è–±–ª–æ–∫–æ, —á–µ—Ä–µ—à–Ω—è —Å –∫–æ—Å—Ç–æ—á–∫–æ–π, –≥—Ä—É—à–∞, –ø–µ—Ä—Å–∏–∫, —á–µ—Ä–Ω–æ—Å–ª–∏–≤ —Å –∫–æ—Å—Ç–æ—á–∫–æ–π, –∞–π–≤–∞ —Å –∫–æ—Å—Ç–æ—á–∫–æ–π"},
          {name:"–°–º–µ—Å—å —Å–µ–º—è–Ω –¥–ª—è —Å–∞–ª–∞—Ç–∞", pack:"–ë–∞–Ω–∫–∞ 400 –≥ ‚Äî 15—Ä",
            note:"–°–µ–º–µ—á–∫–∞ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫–∞, —Å–µ–º–µ–Ω–∞ –ª—å–Ω–∞, –∫—É–Ω–∂—É—Ç –±–µ–ª—ã–π/—á—ë—Ä–Ω—ã–π, —Å–µ–º–µ–Ω–∞ —Ç—ã–∫–≤—ã –æ—á–∏—â–µ–Ω–Ω—ã–µ"},
          {name:"–ú–∏–∫—Å –¥–ª—è –π–æ–≥—É—Ä—Ç–æ–≤ –∏ –∫–∞—à", kg:"70—Ä", g500:"35,5—Ä", g250:"18,5—Ä",
            note:"–ö–µ–¥—Ä–æ–≤—ã–π –æ—Ä–µ—Ö, –º–∞–Ω–≥–æ, –∏–Ω–∂–∏—Ä, –∫–ª—é–∫–≤–∞, –∫—É—Ä–∞–≥–∞, –ø–µ—Ä—Å–∏–∫, –≤–∏—à–Ω—è, –∫–ª—É–±–Ω–∏–∫–∞, –º–∞—Ä–∞–∫—É–π—è"},
        ]
      },
      {
        cat: "–ú–∞—Ä–º–µ–ª–∞–¥",
        items: [
          {name:"–ú–∞—Ä–º–µ–ª–∞–¥ –∂–µ–≤–∞—Ç–µ–ª—å–Ω—ã–π ¬´–ö–∏—Å–ª—ã–µ —á–µ—Ä–≤—è–∫–∏¬ª", kg:"25—Ä", g500:"13,0—Ä", g250:"7—Ä"},
          {name:"–ú–∞—Ä–º–µ–ª–∞–¥ –∂–µ–≤–∞—Ç–µ–ª—å–Ω—ã–π ¬´–ú–µ–¥–≤–µ–¥–∏¬ª", kg:"25—Ä", g500:"13,0—Ä", g250:"7—Ä"},
          {name:"–ú–∞—Ä–º–µ–ª–∞–¥ –∂–µ–≤–∞—Ç–µ–ª—å–Ω—ã–π ¬´–¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–µ —Ñ—Ä—É–∫—Ç—ã¬ª", kg:"25—Ä", g500:"13,0—Ä", g250:"7—Ä"},
          {name:"–ñ–µ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–µ—Ç—ã ¬´–§—Ä—É—Ç–æ–º–∏–∫—Å¬ª", kg:"25—Ä", g500:"13,0—Ä", g250:"7—Ä"},
        ]
      },
      {
        cat: "–ß–∞–π",
        items: [
          {name:"–ß–∞–π –∑–µ–ª—ë–Ω—ã–π –∫–∏—Ç–∞–π—Å–∫–∏–π —Å –∂–∞—Å–º–∏–Ω–æ–º OP", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–ß–∞–π —á—ë—Ä–Ω—ã–π Pekoe", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
          {name:"–ß–∞–π –∫–∞—Ä–∫–∞–¥–µ", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä"},
        ]
      },
      {
        cat: "–°–µ–º–µ–Ω–∞",
        items: [
          {name:"–ö—É–Ω–∂—É—Ç –±–µ–ª—ã–π", kg:"20—Ä", g500:"10,5—Ä", g250:"6—Ä"},
          {name:"–ö—É–Ω–∂—É—Ç —á—ë—Ä–Ω—ã–π", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
          {name:"–°–µ–º–µ—á–∫–∏ —Ç—ã–∫–≤–µ–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω–Ω—ã–µ", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
          {name:"–°–µ–º–µ–Ω–∞ —á–∏–∞ —á—ë—Ä–Ω—ã–µ", kg:"30—Ä", g500:"15,5—Ä", g250:"8,5—Ä"},
        ]
      },
      {
        cat: "–ö—Ä–∞—Ñ—Ç–æ–≤—ã–µ —Å–º–µ—Å–∏",
        items: [
          {name:"–°–º–µ—Å—å ¬´–û–†–ï–•–û–í–ê–Ø¬ª", kg:"45—Ä", g500:"23—Ä", g250:"12,5—Ä",
            note:"–ö–µ—à—å—é –∂–∞—Ä–µ–Ω—ã–π, –º–∏–Ω–¥–∞–ª—å –∂–∞—Ä–µ–Ω—ã–π, —Ñ—É–Ω–¥—É–∫ –∂–∞—Ä–µ–Ω—ã–π, –≥—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö –æ—á–∏—â–µ–Ω–Ω—ã–π"},
          {name:"–°–º–µ—Å—å ¬´–ö –ü–ï–ù–ù–û–ú–£¬ª", kg:"40—Ä", g500:"20,5—Ä", g250:"11—Ä",
            note:"–ê—Ä–∞—Ö–∏—Å —Å–æ–ª—ë–Ω—ã–π, –∫–µ—à—å—é —Å–æ–ª—ë–Ω—ã–π, –º–∏–Ω–¥–∞–ª—å —Å–æ–ª—ë–Ω—ã–π, —Ñ—É–Ω–¥—É–∫ —Å–æ–ª—ë–Ω—ã–π, –±–æ–±—ã —Å–æ–ª—ë–Ω—ã–µ"},
          {name:"–°–º–µ—Å—å ¬´–≠–ö–ó–û–¢–ò–ß–ï–°–ö–ê–Ø¬ª", kg:"45—Ä", g500:"23—Ä", g250:"12,5—Ä",
            note:"–ö–ª—É–±–Ω–∏–∫–∞, –º–∞—Ä–∞–∫—É–π—è, –ø–µ—Ä—Å–∏–∫, –º–∞–Ω–≥–æ, –∫–∏–≤–∏, –≤–∏—à–Ω—è, –±–∞–Ω–∞–Ω–æ–≤—ã–µ —á–∏–ø—Å—ã, –∫–ª—é–∫–≤–∞, –∞–Ω–∞–Ω–∞—Å (—Ü—É–∫–∞—Ç—ã)"},
        ]
      },
      {
        cat: "–ö–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∏–µ –∏–∑–¥–µ–ª–∏—è",
        items: [
          {name:"–ö–æ–∫–æ—Å–∞–Ω (—Ñ—É–Ω–¥—É–∫ –≤ –±–µ–ª–æ–π —à–æ–∫–æ–ª–∞–¥–Ω–æ–π –≥–ª–∞–∑—É—Ä–∏ —Å –∫–æ–∫–æ—Å–æ–≤–æ–π —Å—Ç—Ä—É–∂–∫–æ–π)", kg:"65—Ä", g500:"33—Ä", g250:"17—Ä",
            note:"–ê–Ω–∞–ª–æ–≥ ¬´–†–∞—Ñ–∞—ç–ª–ª–æ¬ª"},
          {name:"–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –∫–æ—Ñ–µ–π–Ω—ã–µ –∑—ë—Ä–Ω–∞ –≤ –º–æ–ª–æ—á–Ω–æ–º —à–æ–∫–æ–ª–∞–¥–µ", kg:"65—Ä", g500:"33—Ä", g250:"17—Ä"},
          {name:"–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫–ª—É–±–Ω–∏–∫–∞ –≤ –±–µ–ª–æ–º —à–æ–∫–æ–ª–∞–¥–µ", kg:"50—Ä", g500:"25,5—Ä", g250:"13,5—Ä"},
          {name:"–ö–æ–Ω—Ñ–µ—Ç—ã ¬´ECO FOODS¬ª (—Ä—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞)", kg:"35—Ä", g500:"18—Ä", g250:"10—Ä",
            note:"–ü–µ—Ä—Å–∏–∫ —Å –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º, –±–∞–Ω–∞–Ω, –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç, —á–µ—Ä–Ω–æ—Å–ª–∏–≤, —Ñ—É–Ω–¥—É–∫ –ø–æ-—à–≤–µ–π—Ü–∞—Ä—Å–∫–∏, –∫—É—Ä–∞–≥–∞ ‚Äî –≤ —à–æ–∫–æ–ª–∞–¥–µ"},
          {name:"–ö—Ä–µ–º –∞—Ä–∞—Ö–∏—Å–æ–≤—ã–π", pack:"–ë–∞–Ω–∫–∞ 250 –≥ ‚Äî 13—Ä"},
          {name:"–ö—Ä–µ–º –æ—Ä–µ—Ö–æ–≤—ã–π –º–∏–Ω–¥–∞–ª—å–Ω—ã–π —Å –∫–∞–∫–∞–æ", pack:"–ë–∞–Ω–∫–∞ 250 –≥ ‚Äî 20—Ä"},
          {name:"–ö—Ä–µ–º –æ—Ä–µ—Ö–æ–≤—ã–π —Ñ–∏—Å—Ç–∞—à–∫–æ–≤—ã–π", pack:"–ë–∞–Ω–∫–∞ 250 –≥ ‚Äî 30—Ä"},
          {name:"–•–∞–ª–≤–∞ —Å —Ñ–∏—Å—Ç–∞—à–∫–æ–π", pack:"–£–ø–∞–∫–æ–≤–∫–∞ 200 –≥ ‚Äî 13—Ä"},
        ]
      },
    ];

    const parsePrice = (priceStr) => {
      if (!priceStr || priceStr === "‚Äî") return 0;
      const s = String(priceStr);
      const matches = [...s.matchAll(/(\d+(?:[.,]\d+)?)(?=\s*—Ä)/gi)];
      if (matches.length) {
        const last = matches[matches.length - 1][1].replace(',', '.');
        const n = parseFloat(last);
        return Number.isFinite(n) ? n : 0;
      }
      const m2 = s.match(/(\d+(?:[.,]\d+)?)/);
      if (!m2) return 0;
      const n2 = parseFloat(m2[1].replace(',', '.'));
      return Number.isFinite(n2) ? n2 : 0;
    };

    const getWeightLabel = (t) => {
      if (t === "kg") return "1 –∫–≥";
      if (t === "g500") return "500 –≥";
      if (t === "g250") return "250 –≥";
      if (t === "pack") return "—Ñ–∞—Å–æ–≤–∫–∞";
      return t;
    };

    const formatMoney = (n) => (Number(n || 0).toFixed(1)).replace('.', ',') + "—Ä";

    /* ‚îÄ‚îÄ Global add-to-cart toast ‚îÄ‚îÄ */
    function useAddToast() {
      const [msg, setMsg] = useState("");
      const [visible, setVisible] = useState(false);
      const timerRef = useRef(null);

      const show = useCallback((text) => {
        setMsg(text);
        setVisible(true);
        if (timerRef.current) clearTimeout(timerRef.current);
        timerRef.current = setTimeout(() => setVisible(false), 2200);
      }, []);

      return { msg, visible, show };
    }

    function App(){
      const [activeCategory, setActiveCategory] = useState("–í—Å–µ");
      const [cartOpen, setCartOpen] = useState(false);
      const [cartItems, setCartItems] = useState([]);

      const [clientName, setClientName] = useState("");
      const [clientPhone, setClientPhone] = useState("");
      const [clientAddress, setClientAddress] = useState("");

      const [notice, setNotice] = useState("");
      const [noticeOpen, setNoticeOpen] = useState(false);

      // Global add toast (bottom, fixed)
      const addToast = useAddToast();

      const showNotice = (msg) => { setNotice(msg); setNoticeOpen(true); };
      const hideNotice = () => setNoticeOpen(false);

      useEffect(() => {
        if (!noticeOpen) return;
        const t = setTimeout(() => setNoticeOpen(false), 5600);
        return () => clearTimeout(t);
      }, [noticeOpen, notice]);

      useEffect(() => {
        try{
          const saved = JSON.parse(localStorage.getItem("rm_client") || "{}");
          if (saved.name) setClientName(saved.name);
          if (saved.phone) setClientPhone(saved.phone);
          if (saved.address) setClientAddress(saved.address);
        }catch(e){}
      }, []);

      useEffect(() => {
        try{
          localStorage.setItem("rm_client", JSON.stringify({name: clientName, phone: clientPhone, address: clientAddress}));
        }catch(e){}
      }, [clientName, clientPhone, clientAddress]);

      const totalItems = cartItems.reduce((s, it) => s + it.quantity, 0);
      const totalPrice = cartItems.reduce((s, it) => s + it.priceValue * it.quantity, 0);

      const categories = useMemo(() => ["–í—Å–µ", ...data.map(b => b.cat)], []);

      const filteredBlocks = useMemo(() => {
        return data
          .filter(b => activeCategory === "–í—Å–µ" || b.cat === activeCategory)
          .filter(b => b.items.length > 0);
      }, [activeCategory]);

      const addToCart = useCallback((item, weightType, priceStr) => {
        const priceValue = parsePrice(priceStr);
        if (priceValue <= 0) return;

        const id = `${item.name}-${weightType}`;
        setCartItems(prev => {
          const existing = prev.find(i => i.id === id);
          if (existing){
            return prev.map(i => i.id === id ? {...i, quantity: i.quantity + 1} : i);
          }
          return [...prev, { id, name: item.name, weightType, priceStr, priceValue, quantity: 1, note: item.note }];
        });

        addToast.show(`‚úì ${item.name} (${getWeightLabel(weightType)}) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ`);
      }, [addToast]);

      const updateQuantity = (id, qty) => {
        if (qty < 1) return removeFromCart(id);
        setCartItems(cartItems.map(it => it.id === id ? {...it, quantity: qty} : it));
      };

      const removeFromCart = (id) => setCartItems(cartItems.filter(it => it.id !== id));
      const clearCart = () => setCartItems([]);

      const orderText = useMemo(() => {
        const lines = [];
        lines.push("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑:");
        lines.push("");
        lines.push(clientName.trim() ? `üë§ –ò–º—è: ${clientName.trim()}` : `üë§ –ò–º—è: (–Ω–µ —É–∫–∞–∑–∞–Ω–æ)`);
        lines.push(clientPhone.trim() ? `üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${clientPhone.trim()}` : `üìû –¢–µ–ª–µ—Ñ–æ–Ω: (–Ω–µ —É–∫–∞–∑–∞–Ω)`);
        lines.push(clientAddress.trim() ? `üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: ${clientAddress.trim()}` : `üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: (–Ω–µ —É–∫–∞–∑–∞–Ω)`);
        lines.push("");
        if (!cartItems.length){
          lines.push("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.");
          return lines.join("\n");
        }
        cartItems.forEach((it, idx) => {
          const sum = it.priceValue * it.quantity;
          lines.push(`${idx+1}. ${it.name} ‚Äî ${getWeightLabel(it.weightType)} ‚Äî ${it.priceStr} √ó ${it.quantity} = ${formatMoney(sum)}`);
          if (it.note) lines.push(`   üìù ${it.note}`);
        });
        lines.push("");
        lines.push(`–ò–¢–û–ì–û: ${formatMoney(totalPrice)}`);
        return lines.join("\n");
      }, [cartItems, totalPrice, clientName, clientPhone, clientAddress]);

      const openTelegram = () => {
        const username = (TELEGRAM_USERNAME || "").replace(/^@/, "").trim();
        if (!username){ showNotice("–£–∫–∞–∂–∏ TELEGRAM_USERNAME –≤ –∫–æ–¥–µ (–±–µ–∑ @)."); return; }
        if (!cartItems.length){ showNotice("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–∫–∞–∑–∞."); return; }
        if (!clientName.trim() || !clientPhone.trim() || !clientAddress.trim()){
          showNotice("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–∫–∞–∑–∞.");
          return;
        }
        hideNotice();
        const url = `https://t.me/${encodeURIComponent(username)}?text=${encodeURIComponent(orderText)}`;
        window.open(url, "_blank", "noopener,noreferrer");
      };

      /* ‚îÄ‚îÄ Price pill component ‚îÄ‚îÄ */
      const PricePill = ({ item, weightType, priceStr }) => {
        const [flash, setFlash] = useState(false);
        const handleClick = () => {
          addToCart(item, weightType, priceStr);
          setFlash(true);
          setTimeout(() => setFlash(false), 500);
        };
        return (
          <button
            className={"price-pill" + (flash ? " added" : "")}
            onClick={handleClick}
            title={`–î–æ–±–∞–≤–∏—Ç—å ${getWeightLabel(weightType)}`}
          >
            <span className="price-pill-label">{getWeightLabel(weightType)}</span>
            <span className="price-pill-value">{priceStr}</span>
            <span className="price-pill-icon">Ôºã</span>
          </button>
        );
      };

      return (
        <div>
          {/* Global add toast */}
          <div className={"global-toast" + (addToast.visible ? " visible" : "")}>
            {addToast.msg}
          </div>

          <header>
            <div className="container header-top">
              <div className="row">
                <div className="brand">
                  <b>ROYAL MARKET ‚Äî –ü—Ä–∞–π—Å</b>
                  <span>–¶–µ–Ω—ã –∑–∞ 1 –∫–≥ / 500 –≥ / 250 –≥ (–≥–¥–µ —É–∫–∞–∑–∞–Ω–æ)</span>
                </div>
                <div className="controls">
                  <button className="btn cart-btn" onClick={()=>setCartOpen(true)} aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
                    <span>üõí</span>
                    {totalItems > 0 && <span className="badge">{totalItems}</span>}
                  </button>
                </div>
              </div>
            </div>

            <div className="container chips">
              {categories.map(cat => (
                <span
                  key={cat}
                  className={"chip" + (activeCategory === cat ? " active" : "")}
                  onClick={()=>{ setActiveCategory(cat); window.scrollTo({top:0, behavior:"smooth"}); }}
                >
                  {cat}
                </span>
              ))}
            </div>
          </header>

          <main className="container">
            {filteredBlocks.map(block => (
              <section className="section" key={block.cat}>
                <h2>
                  <span>{block.cat}</span>
                  <small>{block.items.length} –ø–æ–∑.</small>
                </h2>

                {/* ‚îÄ‚îÄ DESKTOP TABLE ‚îÄ‚îÄ */}
                <div className="desktop-table" style={{overflowX:"auto"}}>
                  <table>
                    <thead>
                      <tr>
                        <th>–¢–æ–≤–∞—Ä</th>
                        <th className="right">1 –∫–≥</th>
                        <th className="right">500 –≥</th>
                        <th className="right">250 –≥</th>
                        <th>–§–∞—Å–æ–≤–∫–∞ / —Ü–µ–Ω–∞</th>
                        <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
                      </tr>
                    </thead>
                    <tbody>
                      {block.items.map((item, idx) => (
                        <tr key={idx}>
                          <td><div className="name">{item.name}</div></td>
                          <td className="mono">
                            <div className="pricecell">
                              <span>{item.kg || "‚Äî"}</span>
                              {item.kg && <button className="add-btn" onClick={()=>addToCart(item, "kg", item.kg)}>‚ûï</button>}
                            </div>
                          </td>
                          <td className="mono">
                            <div className="pricecell">
                              <span>{item.g500 || "‚Äî"}</span>
                              {item.g500 && <button className="add-btn" onClick={()=>addToCart(item, "g500", item.g500)}>‚ûï</button>}
                            </div>
                          </td>
                          <td className="mono">
                            <div className="pricecell">
                              <span>{item.g250 || "‚Äî"}</span>
                              {item.g250 && <button className="add-btn" onClick={()=>addToCart(item, "g250", item.g250)}>‚ûï</button>}
                            </div>
                          </td>
                          <td>
                            <div className="pricecell">
                              <span>{item.pack || "‚Äî"}</span>
                              {item.pack && <button className="add-btn" onClick={()=>addToCart(item, "pack", item.pack)}>‚ûï</button>}
                            </div>
                          </td>
                          <td className="muted" style={{fontSize:"12px"}}>{item.note || "‚Äî"}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>

                {/* ‚îÄ‚îÄ MOBILE CARDS ‚îÄ‚îÄ */}
                <div className="mobile-cards">
                  {block.items.map((item, idx) => (
                    <div className="product-card" key={idx}>
                      <div className="product-card-name">{item.name}</div>
                      {item.note && <div className="product-card-note">{item.note}</div>}
                      <div className="price-pills">
                        {item.kg   && <PricePill item={item} weightType="kg"   priceStr={item.kg}   />}
                        {item.g500 && <PricePill item={item} weightType="g500" priceStr={item.g500} />}
                        {item.g250 && <PricePill item={item} weightType="g250" priceStr={item.g250} />}
                        {item.pack && <PricePill item={item} weightType="pack" priceStr={item.pack} />}
                      </div>
                    </div>
                  ))}
                </div>
              </section>
            ))}
          </main>

          {/* ‚îÄ‚îÄ CART ‚îÄ‚îÄ */}
          <div className={"backdrop" + (cartOpen ? " open" : "")} onClick={()=>setCartOpen(false)} />
          <aside className={"cart" + (cartOpen ? " open" : "")} aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
            <div className="cart-head">
              <h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
              <button className="xbtn" onClick={()=>setCartOpen(false)} aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            </div>

            {cartItems.length === 0 ? (
              <div className="cart-body" style={{display:"flex", flexDirection:"column", alignItems:"center", justifyContent:"center", textAlign:"center"}}>
                <div style={{fontSize:"56px", marginBottom:"8px"}}>üõí</div>
                <div style={{fontSize:"18px", fontWeight:700, marginBottom:"6px"}}>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
                <div className="muted" style={{marginBottom:"14px"}}>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞</div>
                <button className="btn btn-dark" onClick={()=>setCartOpen(false)}>–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∫—É–ø–∫–∞–º</button>
              </div>
            ) : (
              <>
                <div className="cart-body">
                  <div className="form">
                    <h4>–î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–∫–∞–∑–∞</h4>
                    <div className="field">
                      <label>–ò–º—è</label>
                      <input value={clientName} onChange={(e)=>setClientName(e.target.value)} placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î–º–∏—Ç—Ä–∏–π" autoComplete="name" />
                    </div>
                    <div className="field">
                      <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                      <input value={clientPhone} onChange={(e)=>setClientPhone(e.target.value)} placeholder="+375 29 123-45-67" autoComplete="tel" />
                    </div>
                    <div className="field" style={{marginBottom:0}}>
                      <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                      <input value={clientAddress} onChange={(e)=>setClientAddress(e.target.value)} placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞" autoComplete="street-address" />
                      <div className="hint">–ò–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–¥—Ä–µ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤—è—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ Telegram.</div>
                    </div>
                  </div>

                  {cartItems.map(it => (
                    <div className="item" key={it.id}>
                      <div className="item-top">
                        <div>
                          <div style={{fontWeight:700}}>{it.name}</div>
                          <div className="muted" style={{fontSize:"13px"}}>{getWeightLabel(it.weightType)}</div>
                          {it.note && <div className="muted" style={{fontSize:"12px", marginTop:"6px"}}>{it.note}</div>}
                        </div>
                      </div>
                      <div style={{display:"flex", alignItems:"center", justifyContent:"space-between", gap:"10px"}}>
                        <div className="qty">
                          <button onClick={()=>updateQuantity(it.id, it.quantity - 1)} aria-label="–ú–∏–Ω—É—Å">‚àí</button>
                          <span>{it.quantity}</span>
                          <button onClick={()=>updateQuantity(it.id, it.quantity + 1)} aria-label="–ü–ª—é—Å">+</button>
                        </div>
                        <div style={{textAlign:"right"}}>
                          <div className="muted" style={{fontSize:"13px"}}>{it.priceStr} √ó {it.quantity}</div>
                          <div style={{fontWeight:800}}>{formatMoney(it.priceValue * it.quantity)}</div>
                        </div>
                      </div>
                      <button className="trash" onClick={()=>removeFromCart(it.id)}>
                        <span>üóëÔ∏è</span> –£–¥–∞–ª–∏—Ç—å
                      </button>
                    </div>
                  ))}
                </div>

                <div className="cart-foot">
                  <div className={"toastwrap" + (noticeOpen && notice ? " show" : "")} aria-live="polite">
                    <div className="toast">
                      <span className="dot" />
                      <div className="ttext">{notice}</div>
                      <button className="tbtn" onClick={()=>setNoticeOpen(false)} aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
                    </div>
                  </div>

                  <div className="totals">
                    <span>–ò—Ç–æ–≥–æ:</span>
                    <b>{formatMoney(totalPrice)}</b>
                  </div>

                  <div className="stack">
                    <button className="btn btn-dark" onClick={openTelegram}>
                      ‚úàÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –≤ Telegram
                    </button>
                    <div className="two">
                      <button className="btn" onClick={()=>{ clearCart(); setNoticeOpen(false); }}>–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
                      <button className="btn" onClick={()=>{
                        if (!cartItems.length){ showNotice("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è."); return; }
                        showNotice(`–ó–∞–∫–∞–∑ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å—É–º–º—É ${formatMoney(totalPrice)}. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –≤ Telegram".`);
                      }}>–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                    </div>
                  </div>

                  <div className="footer-note">
                    –¢–æ–≤–∞—Ä—ã –º–æ–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª. –¢–æ—Ä–≥–æ–≤–∞—è, 15<br/>
                    –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: –ü–Ω-–í—Å 9:00-21:00
                  </div>
                </div>
              </>
            )}
          </aside>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>

</body>
</html>